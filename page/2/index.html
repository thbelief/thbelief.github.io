<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">
  <script>
    (function(){
        if(''){
            if (prompt('请输入博客密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="我这个人只是英俊 潇洒了些许~">
<meta property="og:type" content="website">
<meta property="og:title" content="THBELIEF">
<meta property="og:url" content="http://thbelief.coding.me/page/2/index.html">
<meta property="og:site_name" content="THBELIEF">
<meta property="og:description" content="我这个人只是英俊 潇洒了些许~">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="THBELIEF">
<meta name="twitter:description" content="我这个人只是英俊 潇洒了些许~">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://thbelief.coding.me/page/2/">





  <title>THBELIEF</title>
  








  <script type="text/javascript" src="/js/src/love.js"></script>
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">THBELIEF</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Thbelief's blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/06/01/JavaScript学习笔记-十七/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/01/JavaScript学习笔记-十七/" itemprop="url">JavaScript学习笔记(十七)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-01T09:23:13+08:00">
                2019-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  891
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!-- toc -->
<ul>
<li><a href="#错误处理">错误处理</a><ul>
<li><a href="#类型">类型</a><ul>
<li><a href="#逻辑错误">逻辑错误</a></li>
<li><a href="#异常错误">异常错误</a></li>
</ul>
</li>
<li><a href="#处理">处理</a><ul>
<li><a href="#try-catch-finally">try … catch … finally</a><ul>
<li><a href="#错误类型">错误类型</a></li>
<li><a href="#抛出错误">抛出错误</a></li>
<li><a href="#错误传播">错误传播</a></li>
</ul>
</li>
<li><a href="#异步错误处理">异步错误处理</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="错误处理">错误处理</span></h2><p>和其它的编译语言一样，JS写的过程中难免的也会出现一些错误，这个就涉及到错误的处理部分了，其实这个部分和JAVA有点儿类似，具体的就下面的部分详细说吧。</p>
<h3><span id="类型">类型</span></h3><h4><span id="逻辑错误">逻辑错误</span></h4><p>写程序的过程中出现了<strong>逻辑的错误</strong>导致的代码异常。</p>
<p>简单实例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var s = null;</span><br><span class="line">var len = s.length; // TypeError：null变量没有length属性</span><br></pre></td></tr></table></figure>
<h4><span id="异常错误">异常错误</span></h4><p>这个是执行过程中遇到的<strong>无法预测的异常</strong>出现的错误，比如——网络连接突然中断等等这些意料之外的错误。</p>
<h3><span id="处理">处理</span></h3><p>一般来说，对于<strong>底层语言</strong>来说，错误是通过<strong>错误码</strong>来返回的。这就涉及到返回的值是否正确的判别了，可以预见，这种使用方法其实是十分的不方便的，所以在一些高级语言中使用的是另外的方法。</p>
<h4><span id="try-catch-finally">try … catch … finally</span></h4><p>简单实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line">var r1, r2, s = null;</span><br><span class="line">try &#123;</span><br><span class="line">    r1 = s.length; // 此处应产生错误</span><br><span class="line">    r2 = 100; // 该语句不会执行</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    console.log(&apos;出错了：&apos; + e);</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    console.log(&apos;finally&apos;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&apos;r1 = &apos; + r1); // r1应为undefined</span><br><span class="line">console.log(&apos;r2 = &apos; + r2); // r2应为undefined</span><br></pre></td></tr></table></figure>
<p>执行流程如下：</p>
<p>当代码块被try { … }包裹的时候，就表示这部分代码执行过程中可能会发生错误，一旦发生错误，就不再继续执行后续代码，转而跳到catch块。catch (e) { … }包裹的代码就是错误处理代码，变量e表示捕获到的错误。最后，无论有没有错误，finally一定会被执行。</p>
<p>所以，有错误发生时，执行流程像这样：</p>
<p>先执行try { … }的代码；<br>执行到出错的语句时，后续语句不再继续执行，转而执行catch (e) { … }代码；<br>最后执行finally { … }代码。<br>而没有错误发生时，执行流程像这样：</p>
<p>先执行try { … }的代码；<br>因为没有出错，catch (e) { … }代码不会被执行；<br>最后执行finally { … }代码。</p>
<h5><span id="错误类型">错误类型</span></h5><p>JavaScript有一个<strong>标准的Error对象</strong>表示错误，还有从Error派生的<strong>TypeError、ReferenceError</strong>等错误对象。</p>
<h5><span id="抛出错误">抛出错误</span></h5><p><strong>程序也可以主动抛出一个错误，让执行流程直接跳转到catch块。抛出错误使用throw语句。</strong></p>
<h5><span id="错误传播">错误传播</span></h5><p>如果代码出现了错误，但是又没有被try…catch捕获的话，程序会跳到哪里去呢？</p>
<p>答案是<strong>会被抛到外层调用函数，如果外层函数也没有捕获，该错误会一直沿着函数调用链向上抛出，直到被JavaScript引擎捕获，代码终止执行。</strong></p>
<p>所以正确的操作是——<strong>不在每一个函数内部捕获错误，只需要在合适的地方进行统一的捕获</strong>即可，一网打尽！</p>
<p>具体的地方的话还是需要看具体的情况，不能一概而论。</p>
<h4><span id="异步错误处理">异步错误处理</span></h4><p>JavaScript引擎是一个<strong>事件驱动</strong>的执行引擎，代码总是以<strong>单线程</strong>执行，而回调函数的执行需要等到下一个满足条件的事件出现后，才会被执行。</p>
<p>需要注意的就是——<strong>涉及到异步代码，无法在调用时捕获，原因就是在捕获的当时，回调函数并未执行。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/31/JavaScript学习笔记-十六/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/31/JavaScript学习笔记-十六/" itemprop="url">JavaScript学习笔记(十六)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-31T08:30:21+08:00">
                2019-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  551
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!-- toc -->
<ul>
<li><a href="#j-query">j-Query</a><ul>
<li><a href="#ajax">AJAX</a><ul>
<li><a href="#简单介绍">简单介绍</a></li>
<li><a href="#get">get</a></li>
<li><a href="#post">post</a></li>
<li><a href="#getjson">getJSON</a></li>
<li><a href="#安全限制">安全限制</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="j-query">j-Query</span></h2><h3><span id="ajax">AJAX</span></h3><p>和前面博客提到的原因差不多，由于不同浏览器之间存在的差异，写出的代码其实也是千奇百怪。</p>
<p>j-Query其实也可以写AJAX，也很方便。</p>
<h4><span id="简单介绍">简单介绍</span></h4><p><strong>j-Query在全局对象j-Query（$）绑定了ajax()函数，可以处理AJAX请求。</strong></p>
<p>ajax(url, settings)函数需要接收一个URL和一个可选的settings对象。</p>
<p>常用选项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">async：是否异步执行AJAX请求，默认为true，千万不要指定为false；</span><br><span class="line"></span><br><span class="line">method：发送的Method，缺省为&apos;GET&apos;，可指定为&apos;POST&apos;、&apos;PUT&apos;等；</span><br><span class="line"></span><br><span class="line">contentType：发送POST请求的格式，默认值为&apos;application/x-www-form-urlencoded; charset=UTF-8&apos;，也可以指定为text/plain、application/json；</span><br><span class="line"></span><br><span class="line">data：发送的数据，可以是字符串、数组或object。如果是GET请求，data将被转换成query附加到URL上，如果是POST请求，根据contentType把data序列化成合适的格式；</span><br><span class="line"></span><br><span class="line">headers：发送的额外的HTTP头，必须是一个object；</span><br><span class="line"></span><br><span class="line">dataType：接收的数据格式，可以指定为&apos;html&apos;、&apos;xml&apos;、&apos;json&apos;、&apos;text&apos;等，缺省情况下根据响应的Content-Type猜测。</span><br></pre></td></tr></table></figure>
<p>如何使用回调函数处理返回的数据和出错时候的响应呢？——j-Query的jqXHR对象类似于之前提到过的Promise对象，可以通过各种链式的写法来处理各种回调。</p>
<h4><span id="get">get</span></h4><p>常用的AJAX在j-Query中都提供了相应的辅助方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var jqxhr = $.get(&apos;/path/to/resource&apos;, &#123;</span><br><span class="line">    name: &apos;Bob Lee&apos;,</span><br><span class="line">    check: 1</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4><span id="post">post</span></h4><p>和get是类似的，但是需要注意的就是传入的第二个参数被序列化为<strong>application/x-www-form-urlencoded</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var jqxhr = $.post(&apos;/path/to/resource&apos;, &#123;</span><br><span class="line">    name: &apos;Bob Lee&apos;,</span><br><span class="line">    check: 1</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4><span id="getjson">getJSON</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var jqxhr = $.getJSON(&apos;/path/to/resource&apos;, &#123;</span><br><span class="line">    name: &apos;Bob Lee&apos;,</span><br><span class="line">    check: 1</span><br><span class="line">&#125;).done(function (data) &#123;</span><br><span class="line">    // data已经被解析为JSON对象了</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4><span id="安全限制">安全限制</span></h4><p>由于j-Query中AJAX完全是封装的JS中的AJAX操作，所以安全限制和前面学习过的是一模一样的。</p>
<p>值得注意的是，如果需要使用JSONP的话，可以在ajax()中设置jsonp:’callback’,让j-Query实现JSONP的跨域加载数据。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/30/JavaScript学习笔记-十五/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/30/JavaScript学习笔记-十五/" itemprop="url">JavaScript学习笔记(十五)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-30T15:11:22+08:00">
                2019-05-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  673
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录:</span></h1><!-- toc -->
<ul>
<li><a href="#j-query">j-Query</a><ul>
<li><a href="#动画">动画</a><ul>
<li><a href="#show-hide">show / hide</a></li>
<li><a href="#slideup-slidedown">slideUp / slideDown</a></li>
<li><a href="#fadein-fadeout">fadeIn / fadeOut</a></li>
<li><a href="#自定义">自定义</a></li>
<li><a href="#串行动画">串行动画</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="j-query">j-Query</span></h2><h3><span id="动画">动画</span></h3><p>用JS实现动画的代码其实写起来还是非常麻烦的。</p>
<p>使用j-Query实现动画效果的原理：以固定的时间间隔每次修改Dom元素的CSS样式，看起来也就是动画了。</p>
<h4><span id="show-hide">show / hide</span></h4><p>前面的博客里面已经提到过，如果<strong>无参数调用这两个方法的话，其实就是显示和隐藏Dom元素</strong>，但是这里可以直接传入一个时间参数（<strong>可以是毫秒也可以是slow/fast这种字符串</strong>），这就变成了动画~~~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#testShowHide&apos;);</span><br><span class="line">div.hide(3000); // 在3秒钟内这个Dom元素会逐渐消失</span><br></pre></td></tr></table></figure>
<p><strong>toggle()方法根据当前的状态选择是show还是hide~</strong></p>
<p>实例如下：</p>
<div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0"><br>    <div style="padding: 10px 0"><br>        <button class="uk-button" onclick="$('#testShowHide').hide('slow');">hide(‘slow’)</button><br>        <button class="uk-button" onclick="$('#testShowHide').show('slow');">show(‘slow’)</button><br>    </div><br>    <div style="height: 128px;"><br>        <div id="testShowHide" style="width: 128px; height: 128px; background-color: rgb(204, 204, 204); background-image: url(&quot;/static/img/404.png&quot;); display: block;"></div><br>    </div><br></div>


<h4><span id="slideup-slidedown">slideUp / slideDown</span></h4><p>上面的实例中可以清晰的看到<strong>show和hide是从左上角逐渐展开或者收缩的</strong>，而<strong>slideUp / slideDown是从垂直方向进行展开或者收缩的。</strong></p>
<p>其实就相当于拉窗帘？</p>
<p><strong>slideToggle()根据元素是否可见来决定下一步的操作。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#testSlide&apos;);</span><br><span class="line">div.slideUp(3000); // 在3秒钟内逐渐向上消失</span><br></pre></td></tr></table></figure>
<div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0"><br>    <div style="padding: 10px 0"><br>        <button class="uk-button" onclick="$('#testSlide').slideUp('slow');">slideUp(‘slow’)</button><br>        <button class="uk-button" onclick="$('#testSlide').slideDown('slow');">slideDown(‘slow’)</button><br>    </div><br>    <div style="height: 128px;"><br>        <div id="testSlide" style="width: 128px; height: 128px; background-color: #ccc; background-image: url(/static/img/404.png)"></div><br>    </div><br></div>


<h4><span id="fadein-fadeout">fadeIn / fadeOut</span></h4><p>fadeIn / fadeOut的动画效果是<strong>淡入淡出，</strong>原理其实就是<strong>不断的设置Dom元素的opacity属性</strong>。</p>
<p><strong>fadeToggle()则根据元素是否可见来决定下一步操作。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#testFade&apos;);</span><br><span class="line">div.fadeOut(&apos;slow&apos;); // 在0.6秒内淡出</span><br></pre></td></tr></table></figure>
<p>简单实例：</p>
<div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0"><br>    <div style="padding: 10px 0"><br>        <button class="uk-button" onclick="$('#testFade').fadeOut('slow');">fadeOut(‘slow’)</button><br>        <button class="uk-button" onclick="$('#testFade').fadeIn('slow');">fadeIn(‘slow’)</button><br>    </div><br>    <div style="height: 128px;"><br>        <div id="testFade" style="width: 128px; height: 128px; background-color: #ccc; background-image: url(/static/img/404.png)"></div><br>    </div><br></div>


<h4><span id="自定义">自定义</span></h4><p>上面的效果其实都是很简单很基础的效果，其实真正好看的动画大部分都是自定义的。</p>
<p><strong>animate()方法可以实现任意动画效果，需要传入的参数是DOM元素最终的CSS状态和时间</strong>，j-Query将在时间段内不断调整CSS直到达到预设的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#testAnimate&apos;);</span><br><span class="line">div.animate(&#123;</span><br><span class="line">    opacity: 0.25,</span><br><span class="line">    width: &apos;256px&apos;,</span><br><span class="line">    height: &apos;256px&apos;</span><br><span class="line">&#125;, 3000); // 在3秒钟内CSS过渡到设定值（注意这里是过渡~）</span><br></pre></td></tr></table></figure>
<p><strong>这个方法还可以传入一个函数，动画结束的时候将调用此函数。</strong></p>
<p>其实可以看做是回调函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#testAnimate&apos;);</span><br><span class="line">div.animate(&#123;</span><br><span class="line">    opacity: 0.25,</span><br><span class="line">    width: &apos;256px&apos;,</span><br><span class="line">    height: &apos;256px&apos;</span><br><span class="line">&#125;, 3000, function () &#123;</span><br><span class="line">    console.log(&apos;动画结束！&apos;);</span><br><span class="line">    // 恢复至初始化状态:</span><br><span class="line">    $(this).css(&apos;opacity&apos;, &apos;1.0&apos;).css(&apos;width&apos;, &apos;128px&apos;).css(&apos;height&apos;, &apos;128px&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4><span id="串行动画">串行动画</span></h4><p><strong>j-Query动画可以实现串行动画，其实就是有暂停（通过delay方法实现）。</strong></p>
<p>注意，由于动画需要执行的时间，所以j-Query必须不断的返回Promise对象才能进行后续操作。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/29/JavaScript学习笔记-十四/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/29/JavaScript学习笔记-十四/" itemprop="url">JavaScript学习笔记(十四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-29T08:33:49+08:00">
                2019-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  864
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录:</span></h1><!-- toc -->
<ul>
<li><a href="#j-query">j-Query</a><ul>
<li><a href="#事件">事件</a><ul>
<li><a href="#简单介绍">简单介绍</a></li>
<li><a href="#简单实例">简单实例</a></li>
</ul>
</li>
<li><a href="#事件种类">事件种类</a><ul>
<li><a href="#鼠标事件">鼠标事件</a></li>
<li><a href="#键盘事件">键盘事件</a></li>
<li><a href="#其它事件">其它事件</a></li>
</ul>
</li>
<li><a href="#事件参数">事件参数</a></li>
<li><a href="#取消绑定">取消绑定</a></li>
<li><a href="#事件触发条件">事件触发条件</a></li>
<li><a href="#浏览器安全限制">浏览器安全限制</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="j-query">j-Query</span></h2><h3><span id="事件">事件</span></h3><h4><span id="简单介绍">简单介绍</span></h4><p>JavaScript在浏览器中以<strong>单线程模式</strong>运行，页面加载后，一旦页面上所有的JavaScript代码被执行完后，就只能依赖<strong>触发事件</strong>来执行JavaScript代码。</p>
<p>浏览器在接收到用户的鼠标或键盘输入后，会自动在对应的DOM节点上触发相应的事件。如果该节点已经绑定了对应的JavaScript处理函数，该函数就会自动调用。</p>
<p>在j-Query没有出现之前，因为浏览器的差异导致的结果就是如果浏览器不同的话，想要实现一样的效果，需要实现不同的代码，但是现在只需要写统一的代码即可。</p>
<h4><span id="简单实例">简单实例</span></h4><p> <a id="thbelief" href="#0">点击这里！</a></p>
<p>上面只是一个html中的定义，下面这个代码是上面这个绑定的事件。可以自行测试。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = $(<span class="string">'#test-link'</span>);</span><br><span class="line">a.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当然，上面的写法<strong>on是用来绑定事件的，需要传入事件的名称以及对应的处理函数。</strong></p>
<p>还有一种写法是之前Auto.js之中提到过的click方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.click(function () &#123;</span><br><span class="line">    alert(&apos;Hello!&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>on方法和click方法是完全等价的。</strong></p>
<h3><span id="事件种类">事件种类</span></h3><h4><span id="鼠标事件">鼠标事件</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">click: 鼠标单击时触发； </span><br><span class="line">dblclick：鼠标双击时触发； </span><br><span class="line">mouseenter：鼠标进入时触发； </span><br><span class="line">mouseleave：鼠标移出时触发； </span><br><span class="line">mousemove：鼠标在DOM内部移动时触发； </span><br><span class="line">hover：鼠标进入和退出时触发两个函数，相当于mouseenter加上mouseleave。</span><br></pre></td></tr></table></figure>
<h4><span id="键盘事件">键盘事件</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">键盘事件仅作用在当前焦点的DOM上，通常是&lt;input&gt;和&lt;textarea&gt;。</span><br><span class="line"></span><br><span class="line">keydown：键盘按下时触发； </span><br><span class="line">keyup：键盘松开时触发； </span><br><span class="line">keypress：按一次键后触发。</span><br></pre></td></tr></table></figure>
<h4><span id="其它事件">其它事件</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">focus：当DOM获得焦点时触发； </span><br><span class="line">blur：当DOM失去焦点时触发； </span><br><span class="line">change：当&lt;input&gt;、&lt;select&gt;或&lt;textarea&gt;的内容改变时触发； </span><br><span class="line">submit：当&lt;form&gt;提交时触发； </span><br><span class="line">ready：当页面被载入并且DOM树完成初始化后触发。</span><br></pre></td></tr></table></figure>
<p>注意，ready仅作用于<strong>document对象。</strong>由于ready事件在DOM完成初始化后触发，且只触发一次，所以非常适合用来写其他的<strong>初始化代码。</strong></p>
<h3><span id="事件参数">事件参数</span></h3><p>有些事件，如mousemove和keypress，必须获取鼠标位置和按键的值，所有事件都会传入<strong>Event对象</strong>作为参数。</p>
<h3><span id="取消绑定">取消绑定</span></h3><p><strong>一个已被绑定的事件可以解除绑定，通过off(‘click’, function)实现。</strong></p>
<p>无参数调用off()一次性移除已绑定的<strong>所有类型</strong>的事件处理函数。</p>
<h3><span id="事件触发条件">事件触发条件</span></h3><p>事件的触发总是由<strong>用户操作</strong>引发的。</p>
<p>当用户在文本框中输入时，就会触发change事件。但是，如果用JavaScript代码去改动文本框的值，将<strong><em>不会</em></strong>触发change事件。这就很蛋疼了，有些时候我们希望使用JS代码去触发（脚本原理）。</p>
<p>用代码触发change事件，可以直接调用<strong>无参数的change()</strong>方法来触发该事件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var input = $(&apos;#test-input&apos;);</span><br><span class="line">input.val(&apos;change it!&apos;);</span><br><span class="line">input.change(); // 触发change事件</span><br></pre></td></tr></table></figure>
<h3><span id="浏览器安全限制">浏览器安全限制</span></h3><p>在浏览器中，有些JavaScript代码只有在<strong>用户触发</strong>下才能执行。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/28/JavaScript学习笔记-十三/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/28/JavaScript学习笔记-十三/" itemprop="url">JavaScript学习笔记(十三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-28T14:19:14+08:00">
                2019-05-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  816
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="j-query">j-Query</span></h2><p>上一篇博客其实关于j-Query的基本含义以及如何获得j-Query对象说的很清楚了，现在要说的就是关于拿到对象之后的使用方法了——<strong>操作Dom节点</strong>。</p>
<h3><span id="操作dom">操作Dom</span></h3><h4><span id="修改text和html">修改Text和HTML</span></h4><p>j-Query对象的<strong>text()和html()方法</strong>分别获取节点的文本和原始HTML文本。</p>
<p>原本的HTML结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML结构 --&gt;</span><br><span class="line">&lt;ul id=&quot;test-ul&quot;&gt;</span><br><span class="line">    &lt;li class=&quot;js&quot;&gt;JavaScript&lt;/li&gt;</span><br><span class="line">    &lt;li name=&quot;book&quot;&gt;Java &amp;amp; JavaScript&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>获取相应的文本和HTML：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;#test-ul li[name=book]&apos;).text(); // &apos;Java &amp; JavaScript&apos;</span><br><span class="line">$(&apos;#test-ul li[name=book]&apos;).html(); // &apos;Java &amp;amp; JavaScript&apos;</span><br></pre></td></tr></table></figure>
<p>如何设置文本或者HTML呢？</p>
<p>其实这个很简单，<strong>在j-Query中无参数调用text()是获取文本，传入参数就变成设置文本，HTML也是类似操作。</strong></p>
<p>一个j-Query对象可以包含0个或任意个DOM对象，它的方法实际上会作用在对应的DOM节点上。意思其实就是，如果对一个j-Query对象进行了操作的话，它包含的所有的Dom对象都会被修改。</p>
<p>j-Query对象有一个好处是用户可以执行一个操作，作用在对应的一组DOM节点上。即使<strong>选择器没有返回任何DOM节点</strong>，调用j-Query对象的方法仍然不会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 如果不存在id为thbelief的节点：</span><br><span class="line">$(&apos;#thbelief&apos;).text(&apos;Hello&apos;); // 代码不报错，没有节点被设置为&apos;Hello&apos;</span><br></pre></td></tr></table></figure>
<p>这个操作其实是很有必要的，因为可以省去很多的if语句。</p>
<h3><span id="修改css">修改CSS</span></h3><p>从上面的修改Dom节点就可以看出，其实j-Query其实是有批量操作的特性的。</p>
<p>j-Query对象的所有方法都返回一个j-Query对象（可能是新的也可能是自身），这样可以进行<strong>链式调用。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#test-div&apos;);</span><br><span class="line">div.css(&apos;color&apos;); // &apos;#000033&apos;, 获取CSS属性</span><br><span class="line">div.css(&apos;color&apos;, &apos;#336699&apos;); // 设置CSS属性</span><br><span class="line">div.css(&apos;color&apos;, &apos;&apos;); // 清除CSS属性</span><br></pre></td></tr></table></figure>
<p>css()方法将作用于DOM节点的<strong>style属性</strong>，具有<strong>最高优先级</strong>。</p>
<p>如果要修改class属性，可以用j-Query提供的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#test-div&apos;);</span><br><span class="line">div.hasClass(&apos;highlight&apos;); // false， class是否包含highlight</span><br><span class="line">div.addClass(&apos;highlight&apos;); // 添加highlight这个class</span><br><span class="line">div.removeClass(&apos;highlight&apos;); // 删除highlight这个class</span><br></pre></td></tr></table></figure>
<h3><span id="显示和隐藏dom">显示和隐藏DOM</span></h3><p>隐藏DOM节点<strong>并未改变DOM树的结构</strong>，它只影响DOM节点的显示。这和删除DOM节点是不同的。</p>
<p>这里j-Query提供了hide()和show()两个方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = $(&apos;a[target=_blank]&apos;);</span><br><span class="line">a.hide(); // 隐藏</span><br><span class="line">a.show(); // 显示</span><br></pre></td></tr></table></figure>
<h3><span id="获取dom信息">获取DOM信息</span></h3><p>利用j-Query提供的方法可以直接获取Dom的信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 浏览器可视窗口大小:</span><br><span class="line">$(window).width(); // 800</span><br><span class="line">$(window).height(); // 600</span><br><span class="line"></span><br><span class="line">// HTML文档大小:</span><br><span class="line">$(document).width(); // 800</span><br><span class="line">$(document).height(); // 3500</span><br><span class="line"></span><br><span class="line">// 某个div的大小:</span><br><span class="line">var div = $(&apos;#test-div&apos;);</span><br><span class="line">div.width(); // 600</span><br><span class="line">div.height(); // 300</span><br><span class="line">div.width(400); // 设置CSS属性 width: 400px，是否生效要看CSS是否有效</span><br><span class="line">div.height(&apos;200px&apos;); // 设置CSS属性 height: 200px，是否生效要看CSS是否有效</span><br></pre></td></tr></table></figure>
<p>另外还有attr()、removeAttr()、prop()等等方法。</p>
<h3><span id="操作表单">操作表单</span></h3><p>对于表单元素，j-Query对象统一提供val()方法获取和设置对应的value属性。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/27/JavaScript学习笔记-十二/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/27/JavaScript学习笔记-十二/" itemprop="url">JavaScript学习笔记(十二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-27T15:06:08+08:00">
                2019-05-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2><span id="j-query">j-Query</span></h2><h3><span id="简单介绍">简单介绍</span></h3><p>j-Query 是一个 <strong>JavaScript 库</strong>。</p>
<p>j-Query 极大的<strong>简化</strong>了 JavaScript 编程。</p>
<h3><span id="作用">作用</span></h3><p>（1）消除浏览器之间的差异。（绑定时间以及异步请求之类的）</p>
<p>（2）操作DOM写法简单。</p>
<p>（3）实现动画简单方便、修改CSS等。</p>
<h3><span id="引入">引入</span></h3><p>直接在head中引入即可使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;script src=&quot;//code.j-Query.com/j-Query-1.11.3.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	...</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>
<h3><span id="查询版本">查询版本</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line">console.log(&apos;当前j-Query版本：&apos; + $.fn.j-Query);</span><br></pre></td></tr></table></figure>
<h3><span id="符号">$符号</span></h3><p>$是著名的j-Query符号。实际上，<strong>j-Query把所有功能全部封装在一个全局变量j-Query中</strong>，而这个符号其实也是一个合法的变量名，它是变量j-Query的别名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ === j-Query; // true</span><br></pre></td></tr></table></figure>
<p>一般情况下可以使用$来替代j-Query，因为这样写起来的话很方便，但是有个问题是，如果一旦这个符号已经被占用的话，就还是只能使用j-Query来了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">filter() 过滤掉不符合选择器条件的节点。</span><br><span class="line">map()    把一个j-Query对象包含的若干DOM节点转化为其他对象。</span><br><span class="line">first()、last()和slice()  返回一个新的j-Query对象，把不需要的DOM节点去掉。</span><br></pre></td></tr></table></figure>
<h3><span id="选择器">选择器</span></h3><p>选择器是j-Query的核心。</p>
<p>一个选择器写出来类似$(‘#dom-id’)。</p>
<p>Dom操作一般写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 按ID查找：</span><br><span class="line">var a = document.getElementById(&apos;dom-id&apos;);</span><br></pre></td></tr></table></figure>
<p>这样可以看出，明显代码是略显繁琐的。</p>
<p><strong>j-Query的选择器就是帮助我们快速定位到一个或多个DOM节点。</strong></p>
<h4><span id="按照id查找">按照ID查找</span></h4><p>下面代码可以看出，明显的简单方便。</p>
<p>当然，返回的肯定是<strong>j-Query对象。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 查找&lt;div id=&quot;thbelief&quot;&gt;:</span><br><span class="line">var div = $(&apos;#thbelief&apos;);</span><br></pre></td></tr></table></figure>
<p>所谓的j-Query对象的含义其实就是——<strong>类似数组，每个元素都是一个引用Dom节点的对象。</strong></p>
<p>返回类型如下：</p>
<p>如果存在的话。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;div id=&quot;thbelief&quot;&gt;...&lt;/div&gt;]</span><br></pre></td></tr></table></figure>
<p>不存在返回如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[]</span><br></pre></td></tr></table></figure>
<p>这里需要注意的就是j-Query不会返回undefined和null，这样下一行就不用判断。</p>
<p>j-Query对象和Dom对象之间可以互相转换：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var div = $(&apos;#thbelief&apos;); // j-Query对象</span><br><span class="line">var divDom = div.get(0); // 假设存在div，获取第1个DOM元素</span><br><span class="line">var another = $(divDom); // 重新把DOM包装为j-Query对象</span><br></pre></td></tr></table></figure>
<h4><span id="按照tag查找">按照tag查找</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var ps = $(&apos;p&apos;); // 返回所有&lt;p&gt;节点</span><br><span class="line">ps.length; // 数一数页面有多少个&lt;p&gt;节点</span><br></pre></td></tr></table></figure>
<h4><span id="按照class查找">按照class查找</span></h4><p>注意这个查找前面需要加一个”.”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a = $(&apos;.red&apos;); // 所有节点包含`class=&quot;red&quot;`都将返回</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<p>同时查找多个。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var a = $(&apos;.red.green&apos;); // 注意没有空格！</span><br></pre></td></tr></table></figure>
<h4><span id="按照属性查找">按照属性查找</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var email = $(&apos;[name=email]&apos;); // 找出&lt;??? name=&quot;email&quot;&gt;</span><br><span class="line">var passwordInput = $(&apos;[type=password]&apos;); // 找出&lt;??? type=&quot;password&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>当属性的值包含空格等特殊字符时，需要用<strong>双引号</strong>括起来。</p>
<h4><span id="组合查找">组合查找</span></h4><p>其实就是把前面提到的查找方式自由组合。</p>
<p>例如下面这个查找tag+class组合。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var tr = $(&apos;tr.red&apos;); // 找出&lt;tr class=&quot;red ...&quot;&gt;...&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<h4><span id="多项选择器">多项选择器</span></h4><p>多项选择器就是把多个选择器用,组合起来一块选，返回的是所有选择出来的。</p>
<p><strong>选出来的元素是按照它们在HTML中的出现顺序来排列的，并且不会存在重复元素。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;p,div&apos;); // 把&lt;p&gt;和&lt;div&gt;都选出来</span><br></pre></td></tr></table></figure>
<h3><span id="层级选择器">层级选择器</span></h3><p>Dom的结构其实就是层级的，所以除了基本的选择器以外，层级选择器其实更具有查找的优越性。</p>
<p><strong>如果两个DOM元素具有层级关系，就可以用$(‘ancestor descendant’)来选择，层级之间用空格隔开。</strong></p>
<h3><span id="子选择器">子选择器</span></h3><p>子选择器$(‘parent&gt;child’)类似层级选择器，但是限定了层级关系必须是<strong>父子关系</strong>，就是child节点必须是parent节点的直属子节点。</p>
<h3><span id="过滤器">过滤器</span></h3><p>一般不独立使用，通常附加在选择器上面，以便更精确的定位元素。</p>
<h3><span id="表单相关">表单相关</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:input：可以选择&lt;input&gt;，&lt;textarea&gt;，&lt;select&gt;和&lt;button&gt;；</span><br><span class="line"></span><br><span class="line">:file：可以选择&lt;input type=&quot;file&quot;&gt;，和input[type=file]一样；</span><br><span class="line"></span><br><span class="line">:checkbox：可以选择复选框，和input[type=checkbox]一样；</span><br><span class="line"></span><br><span class="line">:radio：可以选择单选框，和input[type=radio]一样；</span><br><span class="line"></span><br><span class="line">:focus：可以选择当前输入焦点的元素，例如把光标放到一个&lt;input&gt;上，用$(&apos;input:focus&apos;)就可以选出；</span><br><span class="line"></span><br><span class="line">:checked：选择当前勾上的单选框和复选框，用这个选择器可以立刻获得用户选择的项目，如$(&apos;input[type=radio]:checked&apos;)；</span><br><span class="line"></span><br><span class="line">:enabled：可以选择可以正常输入的&lt;input&gt;、&lt;select&gt; 等，也就是没有灰掉的输入；</span><br><span class="line"></span><br><span class="line">:disabled：和:enabled正好相反，选择那些不能输入的。</span><br></pre></td></tr></table></figure>
<h3><span id="查找">查找</span></h3><p>通常情况下选择器可以直接定位到我们想要的元素，但是，当拿到一个j-Query对象后，还可以以这个对象为基准，进行查找和过滤。</p>
<p>这里使用的是find()方法查找所有的子节点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var ul = $(&apos;ul.lang&apos;); // 获得&lt;ul&gt;</span><br><span class="line">var dy = ul.find(&apos;.dy&apos;); // 获得JavaScript, Python, Scheme</span><br></pre></td></tr></table></figure>
<p>使用parent()方法向上查找节点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var swf = $(&apos;#swift&apos;); // 获得Swift</span><br><span class="line">var parent = swf.parent(); // 获得Swift的上层节点&lt;ul&gt;</span><br><span class="line">var a = swf.parent(&apos;.red&apos;); // 获得Swift的上层节点&lt;ul&gt;，同时传入过滤条件。如果ul不符合条件，返回空j-Query对象</span><br></pre></td></tr></table></figure>
<p>使用next()和prev()方法查找同一层级的节点。</p>
<h3><span id="过滤">过滤</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">filter() 过滤掉不符合选择器条件的节点。</span><br><span class="line">map()    把一个j-Query对象包含的若干DOM节点转化为其他对象。</span><br><span class="line">first()、last()和slice()  返回一个新的j-Query对象，把不需要的DOM节点去掉。</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/26/机器学习实验-线性回归预测/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/26/机器学习实验-线性回归预测/" itemprop="url">机器学习实验-线性回归预测</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-26T10:20:57+08:00">
                2019-05-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/机器学习/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  520
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!--toc-->
<h2><span id="实验目的">实验目的</span></h2><p><strong>对给定的数据集进行线性回归预测。</strong></p>
<h2><span id="实验内容">实验内容</span></h2><ol>
<li>先创建csv 文件。</li>
<li>利用WEKA 的TOOLS 讲csv 转换为arff 工具。</li>
<li>利用WEKA 学习线性回归模型。</li>
</ol>
<h2><span id="实验过程">实验过程</span></h2><p>(1)首先讲数据集在EXCEL 中进行处理，转变为CSV 文件格式，注意这里<br>需要把原数据集中的属性名称改变为英文。<br>        另存为data.csv 在桌面即可。等会儿还需要使用到。</p>
<p><img src="/2019/05/26/机器学习实验-线性回归预测/1.jpg" alt=""></p>
<p>(2)利用WEKA 的TOOLS 将CSV 格式转换为ARFF 格式。<br>        也是另存为桌面为data.arff。</p>
<p><img src="/2019/05/26/机器学习实验-线性回归预测/2.jpg" alt=""></p>
<p>（3）将data.arff 导入进WEKA 进行线性回归预测即可。</p>
<p>（4）先使用Use training set 来测试。</p>
<p><img src="/2019/05/26/机器学习实验-线性回归预测/3.jpg" alt=""></p>
<p>（5）采用10 折交叉验证（ 10-fold cross validation） 来选择和评估模型。</p>
<p><img src="/2019/05/26/机器学习实验-线性回归预测/4.jpg" alt=""></p>
<p>(6)由于Weka 在<strong>处理丢失数据的时候已经做了均值处理</strong>。所以这里不对缺失值进行操作。</p>
<h2><span id="实验结果">实验结果</span></h2><p><img src="/2019/05/26/机器学习实验-线性回归预测/结果.jpg" alt=""></p>
<h2><span id="实验总结">实验总结</span></h2><h3><span id="问题">问题</span></h3><ol>
<li>首先就是实验中遇到的问题— —缺失值的处理，最开始的想法是<br>使用均值来替代，但是得出的结果和之前不处理是一样的，所以从这<br>里我猜测WEKA 已经做了相关的处理，是以就不用进行另外的处理了。</li>
<li>最开始不知道如何将CSV 转换为ARFF 格式， 还好是找到了相关<br>的方案。解决了这个问题。</li>
</ol>
<h3><span id="总结">总结</span></h3><p>值得注意的是， 数据缺失的话在WEKA 中需要使用? 来替代表示是<br>一个缺失值， 不能使用-或者0 这种东西来替代。<br>        在统计学中， 线性回归(Linear Regression)是利用称为线性回归<br>方程的最小平方函数对一个或多个自变量和因变量之间关系进行建模<br>的一种回归分析。<br>        本次实验就是利用Weka 在生育率、老龄人口占比、老龄人口死亡<br>占比、人口流动比率、女性育龄人口占比这6 个自变量和实际人口数之<br>间进行建模分析。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/25/JavaScript学习笔记-十一/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/25/JavaScript学习笔记-十一/" itemprop="url">JavaScript学习笔记(十一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-25T19:55:31+08:00">
                2019-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  728
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!-- toc -->
<ul>
<li><a href="#canvas">Canvas</a><ul>
<li><a href="#简单介绍">简单介绍</a></li>
<li><a href="#创建画布">创建画布</a></li>
<li><a href="#浏览器支持">浏览器支持</a></li>
<li><a href="#使用">使用</a></li>
<li><a href="#绘制">绘制</a></li>
<li><a href="#注意事项">注意事项</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="canvas">Canvas</span></h2><h3><span id="简单介绍">简单介绍</span></h3><p>Canvas是HTML5之后新增的组件，其实就是相当于<strong>画布</strong>，本身这个元素是没有绘制能力的，但是可以通过JS在这个画布上面进行图形与表格的绘制之类的。</p>
<h3><span id="创建画布">创建画布</span></h3><p>一个Canvas其实就是定义了一个<strong>指定尺寸的矩形框</strong>，在这个范围里面可以随意的绘制自己想要绘制的图形。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id=&quot;testCanvas&quot; width=&quot;250&quot; height=&quot;250&quot;&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure>
<canvas id="testCanvas" width="250" height="250"></canvas>

<h3><span id="浏览器支持">浏览器支持</span></h3><p>由于不同的浏览器对于HTML5的支持标准不同，所以，<strong>使用这个画布之前必须加以判断</strong>，比如如果不支持的话返回提示。</p>
<p>实例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id=&quot;testCanvas&quot; width=&quot;250&quot; height=&quot;250&quot;&gt;</span><br><span class="line">	 &lt;p&gt;Does not support！&lt;/p&gt;</span><br><span class="line">&lt;/canvas&gt;</span><br></pre></td></tr></table></figure>
<p>如果浏览器支持Canvas的话会直接忽略内部的HTML，如果不支持的话就会显示画布里面的内容。</p>
<p>检测方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&apos;use strict&apos;;</span><br><span class="line">var canvas = document.getElementById(&apos;testCanvas&apos;);</span><br><span class="line">if (canvas.getContext) &#123;</span><br><span class="line">    console.log(&apos;浏览器支持Canvas!&apos;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    console.log(&apos;浏览器不支持Canvas!&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="使用">使用</span></h3><p>这里以2D作为示例。</p>
<p>要对一个画布对象进行绘制的话，首先需要<strong>获取到一个2D对象。</strong>方法是<strong>getContext(‘2d’)</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var ctx = canvas.getContext(&apos;2d&apos;);</span><br></pre></td></tr></table></figure>
<p>绘制3D的话需要使用WebGL规范：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test = canvas.getContext(&quot;webgl&quot;);</span><br></pre></td></tr></table></figure>
<h3><span id="绘制">绘制</span></h3><p>Canvas的坐标以左上角为原点，水平向右为X轴，垂直向下为Y轴，以像素为单位，所以每个点都是<strong>非负整数。</strong></p>
<p>基本形状绘制：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'test-shape-canvas'</span>),</span><br><span class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>); <span class="comment">// 擦除(0,0)位置大小为200x200的矩形，擦除的意思是把该区域变为透明</span></span><br><span class="line">ctx.fillStyle = <span class="string">'#dddddd'</span>; <span class="comment">// 设置颜色</span></span><br><span class="line">ctx.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">130</span>, <span class="number">130</span>); <span class="comment">// 把(10,10)位置大小为130x130的矩形涂色</span></span><br><span class="line"><span class="comment">// 利用Path绘制复杂路径:</span></span><br><span class="line"><span class="keyword">var</span> path=<span class="keyword">new</span> Path2D();</span><br><span class="line">path.arc(<span class="number">75</span>, <span class="number">75</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">path.moveTo(<span class="number">110</span>,<span class="number">75</span>);</span><br><span class="line">path.arc(<span class="number">75</span>, <span class="number">75</span>, <span class="number">35</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI, <span class="literal">false</span>);</span><br><span class="line">path.moveTo(<span class="number">65</span>, <span class="number">65</span>);</span><br><span class="line">path.arc(<span class="number">60</span>, <span class="number">65</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">path.moveTo(<span class="number">95</span>, <span class="number">65</span>);</span><br><span class="line">path.arc(<span class="number">90</span>, <span class="number">65</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.strokeStyle = <span class="string">'#0000ff'</span>;</span><br><span class="line">ctx.stroke(path);</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2019/05/25/JavaScript学习笔记-十一/1.jpg" alt=""></p>
<p>基本文本绘制：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'test-text-canvas'</span>),</span><br><span class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">ctx.shadowOffsetX = <span class="number">2</span>;</span><br><span class="line">ctx.shadowOffsetY = <span class="number">2</span>;</span><br><span class="line">ctx.shadowBlur = <span class="number">2</span>;</span><br><span class="line">ctx.shadowColor = <span class="string">'#666666'</span>;</span><br><span class="line">ctx.font = <span class="string">'24px Arial'</span>;</span><br><span class="line">ctx.fillStyle = <span class="string">'#333333'</span>;</span><br><span class="line">ctx.fillText(<span class="string">'带阴影的文字'</span>, <span class="number">20</span>, <span class="number">40</span>);</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2019/05/25/JavaScript学习笔记-十一/2.jpg" alt=""></p>
<h3><span id="注意事项">注意事项</span></h3><p>1.尽量使用整数坐标而不是浮点数。</p>
<p>2.如果要实现很复杂的效果的话，可以使用多个重叠的画布而不是在一个画布上面进行复杂的绘制。</p>
<p>3.背景图片如果不变可以直接用img标签并放到最底层。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/24/机器学习实验-K-Means模型聚类/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/机器学习实验-K-Means模型聚类/" itemprop="url">机器学习实验-K-Means模型聚类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T21:13:13+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/机器学习/" itemprop="url" rel="index">
                    <span itemprop="name">机器学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  498
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!-- toc -->
<ul>
<li><a href="#实验目的">实验目的</a></li>
<li><a href="#实验内容">实验内容</a></li>
<li><a href="#实验过程">实验过程</a></li>
<li><a href="#实验结果">实验结果</a></li>
<li><a href="#实验总结">实验总结</a><ul>
<li><a href="#问题">问题</a></li>
<li><a href="#总结">总结</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="实验目的">实验目的</span></h2><p>利用K-Means模型对上个实验得到的数据集进行聚类。</p>
<h2><span id="实验内容">实验内容</span></h2><p> 1） 选取数据空间中的K个对象作为初始中心，每个对象代表一个聚类中心。<br>        2） 对于样本中的数据对象，根据它们与这些聚类中心的欧氏距离，按距离最近的准则将它们分到距离它们最近的聚类中心（最相似）所对应的类。<br>        3） 更新聚类中心：将每个类别中所有对象所对应的均值作为该类别的聚类中心，计算目标函数的值。<br>        4） 判断聚类中心和目标函数的值是否发生改变，若不变，则输出结果，若改变，则返回2）。</p>
<h2><span id="实验过程">实验过程</span></h2><p>1.确定聚类中心。</p>
<p><img src="/2019/05/24/机器学习实验-K-Means模型聚类/1.png" alt=""></p>
<p>2.计算欧式距离。</p>
<p><img src="/2019/05/24/机器学习实验-K-Means模型聚类/2.png" alt=""></p>
<p>3.根据聚类中心的位置来分配样本中的数据对象.</p>
<p><img src="/2019/05/24/机器学习实验-K-Means模型聚类/3.png" alt=""></p>
<p>4.更新当前的聚类中心。</p>
<p><img src="/2019/05/24/机器学习实验-K-Means模型聚类/4.png" alt=""></p>
<p>5.输出结果到指定的KMeansOutPut.txt。</p>
<h2><span id="实验结果">实验结果</span></h2><p><img src="/2019/05/24/机器学习实验-K-Means模型聚类/结果.png" alt=""></p>
<h2><span id="实验总结">实验总结</span></h2><h3><span id="问题">问题</span></h3><p> K的选择问题。<br>        相似度定义问题。<br>        初始化K个质心的选择。（这里还包含了一个局部最小的问题）</p>
<h3><span id="总结">总结</span></h3><p> 本次实验中的kmeans算法首先选择K个初始质心，其中K是用户指定的参数，即所期望的簇的个数。<br>        然后就是选择适当的初始质心，这也是kmeans算法的关键步骤。<br>        由于随机的选取初始质心，这样生成簇的质量常常很差。有些会出现局部最小问题。<br>        这里采取的是网上有人使用过的方法：选取具有最小SSE（误差的平方和）的簇集。即多次运行，每次使用一组不同的随机初始质心。<br>        本次实验中使用的距离度量方法是欧式距离。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://thbelief.coding.me/2019/05/23/JavaScript学习笔记-十/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="THBELIEF">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zhangguoron.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="THBELIEF">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/23/JavaScript学习笔记-十/" itemprop="url">JavaScript学习笔记(十)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-23T09:12:05+08:00">
                2019-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/" itemprop="url" rel="index">
                    <span itemprop="name">后端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/后端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  642
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1><span id="目录">目录：</span></h1><!-- toc -->
<ul>
<li><a href="#promise">Promise</a><ul>
<li><a href="#简单介绍">简单介绍</a></li>
<li><a href="#是否支持promise">是否支持Promise</a></li>
<li><a href="#简单实例">简单实例</a></li>
<li><a href="#用法">用法</a><ul>
<li><a href="#promisethenthencatch-多任务串行执行">Promise().then().then….catch() 多任务串行执行</a></li>
<li><a href="#promiseallp1p2-多任务并行执行">Promise.all([p1,p2,…]) 多任务并行执行</a></li>
<li><a href="#promiseracep1p2-多任务赛跑">Promise.race([p1,p2,…]) 多任务赛跑</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="promise">Promise</span></h2><p>在JS中，所有的代码其实都是<strong>单线程</strong>执行的。</p>
<p>这也就导致了前面提到过的，所有的网络请求之类的操作都需要<strong>异步执行。（回调函数）</strong></p>
<p>例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'test'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'before'</span>);</span><br><span class="line">setTimeout(callback, <span class="number">1000</span>); <span class="comment">// 1秒钟后调用callback函数</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'after'</span>);</span><br></pre></td></tr></table></figure>
<p>1s之后出现了test：</p>
<p><img src="/2019/05/23/JavaScript学习笔记-十/1.jpg" alt=""></p>
<p>一般AJAX的操作写法如下：</p>
<p>好处是统一执行逻辑，不关心是否结果正常，后面再加上判断即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax = ajaxGet(<span class="string">'http://...'</span>);</span><br><span class="line">ajax.ifSuccess(success)</span><br><span class="line">    .ifFail(fail);</span><br></pre></td></tr></table></figure>
<h3><span id="简单介绍">简单介绍</span></h3><p>所谓的Promise，其实就是承诺的意思。</p>
<p>意思是——<strong>承诺将来会执行。</strong></p>
<p>Promise在ES6中统一规范，是浏览器直接支持的，<strong>有些浏览器不支持。。。</strong></p>
<h3><span id="是否支持promise">是否支持Promise</span></h3><p>可以通过以下代码测试是否支持Promise：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);<span class="comment">// 直接运行测试:</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Promise!'</span>);</span><br></pre></td></tr></table></figure>
<p>如果支持的话，会返回Promise这个字符串：</p>
<p><img src="/2019/05/23/JavaScript学习笔记-十/2.jpg" alt=""></p>
<h3><span id="简单实例">简单实例</span></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除log:</span></span><br><span class="line"><span class="keyword">var</span> logging = <span class="built_in">document</span>.getElementById(<span class="string">'test-promise-log'</span>);</span><br><span class="line"><span class="keyword">while</span> (logging.children.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    logging.removeChild(logging.children[logging.children.length - <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出log到页面:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> p = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span><br><span class="line">    p.innerHTML = s;</span><br><span class="line">    logging.appendChild(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    log(<span class="string">'start new Promise...'</span>);</span><br><span class="line">    <span class="keyword">var</span> timeOut = <span class="built_in">Math</span>.random() * <span class="number">2</span>;</span><br><span class="line">    log(<span class="string">'set timeout to: '</span> + timeOut + <span class="string">' seconds.'</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timeOut &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            log(<span class="string">'call resolve()...'</span>);</span><br><span class="line">            resolve(<span class="string">'200 OK'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            log(<span class="string">'call reject()...'</span>);</span><br><span class="line">            reject(<span class="string">'timeout in '</span> + timeOut + <span class="string">' seconds.'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, timeOut * <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">r</span>) </span>&#123;</span><br><span class="line">    log(<span class="string">'Done: '</span> + r);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    log(<span class="string">'Failed: '</span> + reason);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/23/JavaScript学习笔记-十/3.jpg" alt=""></p>
<p>可以清晰的看到，执行的代码和处理结果的代码进行了分离。</p>
<h3><span id="用法">用法</span></h3><h4><span id="promisethenthencatch-多任务串行执行">Promise().then().then….catch() 多任务串行执行</span></h4><p>情景化记忆:在一个任务链中,比如我要向上级部门一层层的往上提交申请,if(某种条件)承诺帮你resolve解决问题,else承诺reject你的请求. 他给出的resolve问题的办法只是个空头Promise,then到总经理那实现具体承诺,如果总经理还是给一个空头承诺(返回Promise实例),还得then到董事长那里…. 任一一步做出的是reject的承诺,还有什么好说的,被拒绝了,后面的就不会再往上走了呀. 准备catch 拒绝通知吧blablabla.</p>
<h4><span id="promiseallp1p2-多任务并行执行">Promise.all([p1,p2,…]) 多任务并行执行</span></h4><p>都要成功才进入then,返回结果数组.</p>
<h4><span id="promiseracep1p2-多任务赛跑">Promise.race([p1,p2,…]) 多任务赛跑</span></h4><p>then()和catch(),谁先调用算谁的,其它任务中断.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/zhangguoron.jpg" alt="THBELIEF">
            
              <p class="site-author-name" itemprop="name">THBELIEF</p>
              <p class="site-description motion-element" itemprop="description">我这个人只是英俊 潇洒了些许~</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">104</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">161</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/thbelief" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:2465749045@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/thbelief" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-globe"></i>CSDN</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">THBELIEF</span>

  
</div>


  <!--<div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>
-->



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共131.4k字</span>
</div>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":125,"height":150},"mobile":{"show":false},"log":false,"tagMode":false});</script></body>
</html>
